<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC
 "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.basics.mall.entity.MallShopAdvert">
 <cache type="com.basics.support.mybatis.CacheAdapter"/>
 <select id="query" resultType="com.basics.mall.entity.MallShopAdvert" useCache="false" flushCache="false">
    select
    ADVERT_ID as id,
    CUSTOMER_ID as customerId,
    ADVERT_NAME as advertName,
    ADVERT_CONTEXT as advertContext,
    ADVERT_IMAGE as advertImage,
    SHOP_LICENCE as shopLicence,
    SHOP_VIDEO as shopVideo,
    ADVERT_PHONE as advertPhone,
    ADVERT_ADDRESS as advertAddress,
    ADVERT_LONGITUDE as advertLongitude,
    ADVERT_LATITUDE as advertLatitude,
    APPLY_STATUS as applyStatus,
    APPLY_CONTEXT as applyContext,
    FLAG_DEL as flagDel,
    CREATE_TIME as createTime,
    ADVERT_SALE as advertSale,
    CITY,
    REGION
    from mall_shop_advert
    where 1=1
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(id)">
    and advert_id = #{id}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(customerId)">
    and customer_id = #{customerId}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(applyStatus)">
    and apply_status = #{applyStatus}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(flagDel)">
    and FLAG_DEL = #{flagDel}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(city)">
    and city = #{city}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(region)">
    and region = #{region}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(classifyId)">
     and CLASSIFY_ID = #{classifyId}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(classifyIds)">
     and CLASSIFY_ID = ${classifyIds}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(classifyIds)">
     and CLASSIFY_ID = ${classifyIds}
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(advertName)">
      <![CDATA[and advert_name like '%${advertName}%' ]]>
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(createTime)">
     order by CREATE_TIME DESC
  </if>
  <if test="advertSale != null">
     order by advert_sale desc
  </if>
  <if test="@org.apache.commons.lang.StringUtils@isNotEmpty(pageN)">
      limit #{pageN},#{pageS}
  </if>
 </select>
</mapper>
